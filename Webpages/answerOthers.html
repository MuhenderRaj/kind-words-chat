<!DOCTYPE html>

<html lang = "en">
    <head>
        <title>Reassure</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <!-- Bootstrap -->
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        
        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

        <!--DEPENDENCIES:-->
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

        <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-app.js"></script>

        <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
        <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-analytics.js"></script>

        <!-- Add Firebase products that you want to use -->
        <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-database.js"></script>
        
        <link rel="stylesheet" href="../Styles/style.css">
        <script src="../Scripts/script.js"></script>
        <script src="../Scripts/serverInterface.js"></script>

        <script>
            var keys = [];

            function loadpage(){
                var cardParent = document.getElementById("requests");
                initHelp();


                //alert("inithelp called");
                
                //try setTimeout(500)? and see if that solves it idk does it work? oh ok
                //I think that function is executed only after this one returns, maybe just use a button to fetch cards for now
                //no wait, it's not waiting at all

                
                //make this into a function, and have a button that calls it 
                // for(var i = 0; i < 3; i++){
                    
                //     var userReq = document.getElementById("req" + (i + 1));
                //     var req = getAPost();
                //     alert(req);//shows 3 'undefined's
                //     userReq.innerHTML = req;
                // }  
                    

                //while(!done);

                // for(var i = 0; i < 3; i++){
                    
                //     var userReq = document.getElementById("req" + (i + 1));
                //     var req = getAPost();
                //     alert(req);//shows 3 'undefined's
                //     userReq.innerHTML = req;
                // }
            }

            function dothis(){
                for(var i = 0; i < 3; i++){
                    
                    var userReq = document.getElementById("req" + (i + 1));
                    var req = getAPost();
                    //alert(req[0]);
                    //alert(req[1]);
                    //maybe returning an array is a bad idea?
                    console.log(req.key);
                    userReq.innerHTML = req.value;
                    keys.push(req.key);
                }  
            }
        </script>
    </head>

    

    <body onload="loadpage()">
        <!-- this isn't needed' A header would look good You're right, but maybe change the formatting' 
    <header class="container-fluid">
        <h1 class="col">Header</h1>
    </header> -->
        <!--
    <nav class="navbar navbar-expand-sm bg-light">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="#">link 1</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">link 2</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">link 3</a>
            </li>
        </ul>     /* let's not show this for now.*/
    </nav> -->

        <!--how do you reopen it? works reasonably. It's still only at the top tho-->
    
        <span style="font-size:20px;cursor:pointer" onclick="openNav()" id="opennav" class="container border rounded border-warning menu">&#9776; Menu</span> <!-- this i think contains the code to reopen it-->
        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <a href="index.html">Ask for Help</a>
            <a href="#">Help others</a>
            <a href="#">Get Replies</a>
        </div>

        <section class="container-fluid row justify-content-center">
           
            <h3>
                This is the Web Version for the Game Kind Words!
            </h3>
        </section>
        <section class="container-fluid row justify-content-center">
            <p>
                Our goal is to encourage people to voice their thoughts and feelings during the global
                pandemic in the form of a short letter. Other people can reply to those letters and generate
                positive vibes.
            </p>
        </section>

        <section class="container-fluid row" id="requests">
            <div class="col card" id="card1">
                <h1>
                    Write your response here!
                </h1>
                <p id="req1">the request of other users</p>

                            <!--wait, we can pass 'this' to the function and access the parent card by .parentNode-->
                <form onsubmit="writeResponse(keys[0], reply1);return false" method="POST"> <!-- I think that'll work. Could you help me implement that?-->
                    <div>
                        <textarea name="reply1" id="reply1"></textarea><!--yeah. But the onclick mustn't be on the form. It should be in the submit button, You can only click a button, not a form-->
                    </div>
                    <div>
                        <input type="submit" class="submit"  onclick="removeCard(this)"/>
                    </div>
                </form>
            </div><!--maybe we should have some sort of a "populateList" function to create these cards in the first place during onload(). It would be easier to integrate Mike's function--> <!-- Great idea.-->

            <div class="col card" id="card2">
                <h1>
                    Write your response here!
                </h1>
                <p id="req2">the request of other users</p>
                <form>
                    <div>
                        <textarea name="reply" id="reply2"></textarea>
                    </div>
                    <div>
                        <input type="submit" class="submit"/>
                    </div>
                </form>
            </div>

            <div class="col card" id="card3">
                <h1>
                    Write your response here! <!-- this page is for responding.-->
                </h1>
                <p id="req3">the request of other users</p>
                <form>
                    <div>
                        <textarea name="reply" id="reply3"></textarea>
                    </div>
                    <div>
                        <input type="submit" class="submit"/>
                    </div>
                </form>

            </div>
        </section>
        
    <div class="container">
        <button type="button" onclick="dothis()"> <!--on what? I sent one i see itworks now, but we can't possibly require the user to do this-->
            Click                                 <!--they suggest some stuff to do with promises, async and await. Apparently js will wait for promises if implemented correctly-->
        </button>                                   <!--committed, btw-->
    </div>
    <!--yeah im reading about it rn we should try that out later but lets make sure first that all the functionality is there It works, I ran it, but only on clicking this button-->
        <footer class="container-fluid row justify-content-center fixed-bottom"> <!--let's implement all the functions first tho --><!--ok, you mean like yep responding and stuff? ok-->
            Footer
        </footer>

    </body>
</html>